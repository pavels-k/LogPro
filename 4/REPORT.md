#№ Отчет по лабораторной работе №4
## по курсу "Логическое программирование"

## Обработка естественного языка

### студент: Шевчук П.В.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|   09.01.18   |       3       |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*
Добавьте в отчет грамматику арифметического выражения

## Введение

Для обработки естественных языков используется: построение дерева синтаксического разбора; извлечение глубинного смысла из дерева синтаксического разбора, так как дерево синтаксического разбора является определённым образом размеченным предложением.В анализе искусственных языков используются: лексический разбор; синтаксический разбор. С помощью средств Пролога легко произвести сказанные разборы.

## Задание

Реализовать синтаксический анализатор арифметического выражения и вычислить его числовое значение. В выражении допустимы операции: +, -, *, /, степень ^. Учитывать приоритеты операций.

## Принцип решения

Предикат calculate первым агрументом принимает список, представляющий арифметическую последовательность операций.

Далее происходит синтаксический разбор введённой последовательности.

Сначала, введённая последовательность разделяется по знаку + (-) на левую и правую часть, если это возможно. Далее происходит разбор левой части по знаку + (-) и правой части по знаку * (/).

После разбора выражения по знаку * (/) на левую и правую часть, происхожит разбор левой части по знаку * (/) и разбор правой части по знаку ^.

После разбора выражения по знаку ^ на левую и правую часть, происходит разбор левой части по знаку ^, а разбор правой части не производится, так как правая часть является числом.

Изначально реверс списка не происходит, но это не мешает программе работать корректно.
Код программы:
```prolog 
calculate(L, V):-
    a_expr(L, V),!.

a_expr(E, V):-
    append(T, ['+'| E1], E),
    a_expr(T, V1),
    a_term(E1, V2),
    V is V1 + V2.

a_expr(E, V):-
    append(T, ['-'| E1], E),
    a_expr(T, V1),
    a_term(E1, V2),
    V is V1 - V2.

a_expr(E, V):-
    a_term(E, V).

a_term(T, V):-
    append(N, ['*' | T1], T),
    a_term(N, V1),
    a_power(T1, V2),
    V is V1 * V2.

a_term(T, V):-
    append(N, ['/' | T1], T),
    a_term(N, V1),
    a_power(T1, V2),
    V is V1 / V2.

a_term(T, V):-
    a_power(T, V).

a_power(T, V):-
    append(N, ['^', T2], T),
    a_power(N, T1),
    V is T1 ** T2.

a_power([V], V):-
    number(V).

% Ввести calculate([5, '+', 3, '^',2], X).
```

## Результаты
```
__________________________________________________________
|                Ввод                         |  Вывод   |
|_____________________________________________|__________|
| calculate([2,*,2,^,2,*,2],X).               | X = 16.0 |
| calculate([2,*,2,+,3,+,4,+,5,+,6],X).       | X = 22   |
| calculate([3,^,2,*,3,-,2,*,1],X).           | X = 25.0 |
| calculate([2,^,3,*,2,*,2,+,2,^,3],X).       | X = 40   |
| calculate([10,/,5,*,5,*,2,^,2,+,1],X).      | X = 41.0 |
|_____________________________________________|__________|
```
## Выводы

Лабораборная работа заставила задуматься над тем, какие средства Пролога нужно использовать для реализации синтаксического анализатора. Пролог является действительно удобным языком программирования для решения задач граматического разбора. Пролог без затруднений позволяет, в случае разбора арифметических арифметических выражений, разделить выражение на различные смысловые части и обрабатывать каждую часть рекурсивно и независимо от других частей.
